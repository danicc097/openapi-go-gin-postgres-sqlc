#
# Vendor extensions
# -----------------
#
# Component schemas:
#   - `x-gen-struct` generates (and keeps up to date) a schema from a struct,
#      which can be tagged with OpenAPI fields (via openapi-go).
#      Possible structs to generate from are listed in internal/codegen/structs.gen.go
#      indexed by x-gen-struct.
#      Packages to generate structs from are added adhoc (currently rest and db packages only)
#      Note that rest package structs are generated without prefix since they
#      are the base of the spec - else prefix is the pascal cased package name.
#      The value of x-gen-struct must match the schema name, to prevent duplicates and
#      confusing definitions.
#      To use a yet to be generated struct in a path, simply use the $ref
#      without creating any schema and it will be autogenerated later if it doesn't exist
#      (only for rest package, since any other should not be used as request/response in the
#      first place).
# Path operations:
#   - `x-required-scopes` defines required scopes for a request.
#   - `x-required-role` defines the minimum required role for a request.
#
#
#
# Notes:
#
#
#######################################
x-uuidIDParameterBase: &x-uuidIDParameterBase
  description: UUID identifier
  explode: false
  in: path
  required: true
  schema:
    type: string
    pattern: ^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}
    # https://github.com/deepmap/oapi-codegen/issues/760
    x-go-type: uuid.UUID
    x-go-type-import:
      name: uuid
      path: github.com/google/uuid
  example: 123e4567-e89b-12d3-a456-426614174000
  style: simple
x-uuidParameter: &x-uuidParameter
  !!merge <<: *x-uuidIDParameterBase
  name: id
x-serialIDParameterBase: &x-serialIDParameterBase
  description: integer identifier # requires name (must be the same name in subpaths so gin can handle it)
  explode: false
  in: path
  required: true
  schema:
    type: integer
  example: 41131
  style: simple
x-paginationLimitParameter: &x-paginationLimitParameter
  name: limit
  required: true
  schema:
    type: integer
  in: query
x-paginationDirectionParameter: &x-paginationDirectionParameter
  name: direction
  required: true
  schema:
    $ref: '#/components/schemas/Direction'
  in: query
x-paginationCursorParameter: &x-paginationCursorParameter
  name: cursor
  required: true
  schema:
    type: string
  in: query
x-require-authenticated: &x-require-authenticated
  security:
    - bearer_auth: []
    - api_key: []
# 403 and 401 will have precedence over 4XX, else we
# get response validation failure (500) on a 403 and 401
# since we don't use HTTPError schema
x-error-response: &x-error-response
  403:
    description: Unauthorized
  401:
    description: Unauthenticated
  4XX:
    description: Error response
    content:
      application/json:
        schema:
          $ref: '#/components/schemas/HTTPError'
#
# Anchors must be defined before lines that use them. Also cannot use anchors from different files.
# See https://docs.gitlab.com/ee/ci/yaml/yaml_optimization.html
#
# Ideally in the future this also helps so that oapi-codegen and orval can generate typesafe ids instead of primitives.
# Gin also requires the same parameter names on subpaths, else it panics.
#
# <<<--- GENERATED DB ANCHORS. DO NOT EDIT. --->>>
x-activityIDParameter: &x-activityIDParameter
  # Generated. DO NOT EDIT.
  !!merge <<: *x-serialIDParameterBase
  schema:
    type: integer
    x-go-type: db.ActivityID
    x-go-type-import:
      name: db
      path: github.com/danicc097/openapi-go-gin-postgres-sqlc/internal/repos/postgresql/gen/db
  name: activityID
x-entityNotificationIDParameter: &x-entityNotificationIDParameter
  # Generated. DO NOT EDIT.
  !!merge <<: *x-serialIDParameterBase
  schema:
    type: integer
    x-go-type: db.EntityNotificationID
    x-go-type-import:
      name: db
      path: github.com/danicc097/openapi-go-gin-postgres-sqlc/internal/repos/postgresql/gen/db
  name: entityNotificationID
x-extraSchemaBookAuthorsSurrogateKeyIDParameter: &x-extraSchemaBookAuthorsSurrogateKeyIDParameter
  # Generated. DO NOT EDIT.
  !!merge <<: *x-serialIDParameterBase
  schema:
    type: integer
    x-go-type: db.ExtraSchemaBookAuthorsSurrogateKeyID
    x-go-type-import:
      name: db
      path: github.com/danicc097/openapi-go-gin-postgres-sqlc/internal/repos/postgresql/gen/db
  name: extraSchemaBookAuthorsSurrogateKeyID
x-extraSchemaBookIDParameter: &x-extraSchemaBookIDParameter
  # Generated. DO NOT EDIT.
  !!merge <<: *x-serialIDParameterBase
  schema:
    type: integer
    x-go-type: db.ExtraSchemaBookID
    x-go-type-import:
      name: db
      path: github.com/danicc097/openapi-go-gin-postgres-sqlc/internal/repos/postgresql/gen/db
  name: extraSchemaBookID
x-extraSchemaBookReviewIDParameter: &x-extraSchemaBookReviewIDParameter
  # Generated. DO NOT EDIT.
  !!merge <<: *x-serialIDParameterBase
  schema:
    type: integer
    x-go-type: db.ExtraSchemaBookReviewID
    x-go-type-import:
      name: db
      path: github.com/danicc097/openapi-go-gin-postgres-sqlc/internal/repos/postgresql/gen/db
  name: extraSchemaBookReviewID
x-extraSchemaDummyJoinIDParameter: &x-extraSchemaDummyJoinIDParameter
  # Generated. DO NOT EDIT.
  !!merge <<: *x-serialIDParameterBase
  schema:
    type: integer
    x-go-type: db.ExtraSchemaDummyJoinID
    x-go-type-import:
      name: db
      path: github.com/danicc097/openapi-go-gin-postgres-sqlc/internal/repos/postgresql/gen/db
  name: extraSchemaDummyJoinID
x-extraSchemaNotificationIDParameter: &x-extraSchemaNotificationIDParameter
  # Generated. DO NOT EDIT.
  !!merge <<: *x-serialIDParameterBase
  schema:
    type: integer
    x-go-type: db.ExtraSchemaNotificationID
    x-go-type-import:
      name: db
      path: github.com/danicc097/openapi-go-gin-postgres-sqlc/internal/repos/postgresql/gen/db
  name: extraSchemaNotificationID
x-extraSchemaUserAPIKeyIDParameter: &x-extraSchemaUserAPIKeyIDParameter
  # Generated. DO NOT EDIT.
  !!merge <<: *x-serialIDParameterBase
  schema:
    type: integer
    x-go-type: db.ExtraSchemaUserAPIKeyID
    x-go-type-import:
      name: db
      path: github.com/danicc097/openapi-go-gin-postgres-sqlc/internal/repos/postgresql/gen/db
  name: extraSchemaUserAPIKeyID
x-extraSchemaWorkItemIDParameter: &x-extraSchemaWorkItemIDParameter
  # Generated. DO NOT EDIT.
  !!merge <<: *x-serialIDParameterBase
  schema:
    type: integer
    x-go-type: db.ExtraSchemaWorkItemID
    x-go-type-import:
      name: db
      path: github.com/danicc097/openapi-go-gin-postgres-sqlc/internal/repos/postgresql/gen/db
  name: extraSchemaWorkItemID
x-kanbanStepIDParameter: &x-kanbanStepIDParameter
  # Generated. DO NOT EDIT.
  !!merge <<: *x-serialIDParameterBase
  schema:
    type: integer
    x-go-type: db.KanbanStepID
    x-go-type-import:
      name: db
      path: github.com/danicc097/openapi-go-gin-postgres-sqlc/internal/repos/postgresql/gen/db
  name: kanbanStepID
x-movieIDParameter: &x-movieIDParameter
  # Generated. DO NOT EDIT.
  !!merge <<: *x-serialIDParameterBase
  schema:
    type: integer
    x-go-type: db.MovieID
    x-go-type-import:
      name: db
      path: github.com/danicc097/openapi-go-gin-postgres-sqlc/internal/repos/postgresql/gen/db
  name: movieID
x-notificationIDParameter: &x-notificationIDParameter
  # Generated. DO NOT EDIT.
  !!merge <<: *x-serialIDParameterBase
  schema:
    type: integer
    x-go-type: db.NotificationID
    x-go-type-import:
      name: db
      path: github.com/danicc097/openapi-go-gin-postgres-sqlc/internal/repos/postgresql/gen/db
  name: notificationID
x-projectIDParameter: &x-projectIDParameter
  # Generated. DO NOT EDIT.
  !!merge <<: *x-serialIDParameterBase
  schema:
    type: integer
    x-go-type: db.ProjectID
    x-go-type-import:
      name: db
      path: github.com/danicc097/openapi-go-gin-postgres-sqlc/internal/repos/postgresql/gen/db
  name: projectID
x-teamIDParameter: &x-teamIDParameter
  # Generated. DO NOT EDIT.
  !!merge <<: *x-serialIDParameterBase
  schema:
    type: integer
    x-go-type: db.TeamID
    x-go-type-import:
      name: db
      path: github.com/danicc097/openapi-go-gin-postgres-sqlc/internal/repos/postgresql/gen/db
  name: teamID
x-timeEntryIDParameter: &x-timeEntryIDParameter
  # Generated. DO NOT EDIT.
  !!merge <<: *x-serialIDParameterBase
  schema:
    type: integer
    x-go-type: db.TimeEntryID
    x-go-type-import:
      name: db
      path: github.com/danicc097/openapi-go-gin-postgres-sqlc/internal/repos/postgresql/gen/db
  name: timeEntryID
x-userAPIKeyIDParameter: &x-userAPIKeyIDParameter
  # Generated. DO NOT EDIT.
  !!merge <<: *x-serialIDParameterBase
  schema:
    type: integer
    x-go-type: db.UserAPIKeyID
    x-go-type-import:
      name: db
      path: github.com/danicc097/openapi-go-gin-postgres-sqlc/internal/repos/postgresql/gen/db
  name: userAPIKeyID
x-userNotificationIDParameter: &x-userNotificationIDParameter
  # Generated. DO NOT EDIT.
  !!merge <<: *x-serialIDParameterBase
  schema:
    type: integer
    x-go-type: db.UserNotificationID
    x-go-type-import:
      name: db
      path: github.com/danicc097/openapi-go-gin-postgres-sqlc/internal/repos/postgresql/gen/db
  name: userNotificationID
x-workItemCommentIDParameter: &x-workItemCommentIDParameter
  # Generated. DO NOT EDIT.
  !!merge <<: *x-serialIDParameterBase
  schema:
    type: integer
    x-go-type: db.WorkItemCommentID
    x-go-type-import:
      name: db
      path: github.com/danicc097/openapi-go-gin-postgres-sqlc/internal/repos/postgresql/gen/db
  name: workItemCommentID
x-workItemIDParameter: &x-workItemIDParameter
  # Generated. DO NOT EDIT.
  !!merge <<: *x-serialIDParameterBase
  schema:
    type: integer
    x-go-type: db.WorkItemID
    x-go-type-import:
      name: db
      path: github.com/danicc097/openapi-go-gin-postgres-sqlc/internal/repos/postgresql/gen/db
  name: workItemID
x-workItemTagIDParameter: &x-workItemTagIDParameter
  # Generated. DO NOT EDIT.
  !!merge <<: *x-serialIDParameterBase
  schema:
    type: integer
    x-go-type: db.WorkItemTagID
    x-go-type-import:
      name: db
      path: github.com/danicc097/openapi-go-gin-postgres-sqlc/internal/repos/postgresql/gen/db
  name: workItemTagID
x-workItemTypeIDParameter: &x-workItemTypeIDParameter
  # Generated. DO NOT EDIT.
  !!merge <<: *x-serialIDParameterBase
  schema:
    type: integer
    x-go-type: db.WorkItemTypeID
    x-go-type-import:
      name: db
      path: github.com/danicc097/openapi-go-gin-postgres-sqlc/internal/repos/postgresql/gen/db
  name: workItemTypeID
x-extraSchemaPagElementIDParameter: &x-extraSchemaPagElementIDParameter
  # Generated. DO NOT EDIT.
  !!merge <<: *x-uuidIDParameterBase
  schema:
    type: integer
    x-go-type: db.WorkItemTypeID
    x-go-type-import:
      name: db
      path: github.com/danicc097/openapi-go-gin-postgres-sqlc/internal/repos/postgresql/gen/db
  name: extraSchemaPagElementID
x-extraSchemaUserIDParameter: &x-extraSchemaUserIDParameter
  # Generated. DO NOT EDIT.
  !!merge <<: *x-uuidIDParameterBase
  schema:
    type: integer
    x-go-type: db.WorkItemTypeID
    x-go-type-import:
      name: db
      path: github.com/danicc097/openapi-go-gin-postgres-sqlc/internal/repos/postgresql/gen/db
  name: extraSchemaUserID
x-userIDParameter: &x-userIDParameter
  # Generated. DO NOT EDIT.
  !!merge <<: *x-uuidIDParameterBase
  schema:
    type: integer
    x-go-type: db.WorkItemTypeID
    x-go-type-import:
      name: db
      path: github.com/danicc097/openapi-go-gin-postgres-sqlc/internal/repos/postgresql/gen/db
  name: userID
# <<<--- END OF ANCHORS DB GENERATION. DO NOT EDIT. --->>>
#
#
openapi: 3.0.3
info:
  description: openapi-go-gin-postgres-sqlc
  license:
    name: Apache-2.0
    url: https://www.apache.org/licenses/LICENSE-2.0.html
  title: OpenAPI openapi-go-gin-postgres-sqlc
  version: 2.0.0
servers:
  # description must match current APP_ENV for Swagger UI docs
  - url: https://localhost:8090/v2
    description: dev
  - url: https://myapp.e2e.localhost/api/v2
    description: e2e
  - url: https://myapp.prod.localhost/api/v2
    description: prod
  # for tests validation middleware to work on random port.
  - url: /v2
  - url: /
tags:
  - description: Operations about user
    name: user
paths:
  /auth/myprovider/callback:
    get:
      operationId: MyProviderCallback
      responses:
        302:
          description: Callback for MyProvider auth server
          headers:
            Location:
              description: The URL to which the client should be redirected based on auth:redirect-uri cookie.
              schema:
                type: string
      tags:
        - oidc
  /auth/myprovider/login:
    get:
      operationId: MyProviderLogin
      parameters:
        - name: auth-redirect-uri
          required: true
          schema:
            type: string
          in: query
      responses:
        302:
          description: Redirect to MyProvider auth server login
          headers:
            Location:
              description: MyProvider login screen.
              schema:
                type: string
      tags:
        - oidc
  /events:
    get:
      operationId: Events
      parameters:
        - name: projectName
          required: true
          schema:
            $ref: '#/components/schemas/Project'
          in: query
      responses:
        200:
          description: events
          content:
            text/event-stream:
              schema:
                type: string
      tags:
        - events
  /notifications/user/page:
    get:
      description: ""
      summary: Get paginated user notifications
      operationId: GetPaginatedNotifications
      parameters:
        - *x-paginationLimitParameter
        - *x-paginationDirectionParameter
        - *x-paginationCursorParameter
      tags:
        - notifications
      responses:
        200:
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedNotificationsResponse'
        !!merge <<: *x-error-response
      !!merge <<: *x-require-authenticated
  /ping:
    get:
      description: ""
      summary: Ping pongs
      operationId: Ping
      responses:
        200:
          description: OK
          content:
            text/plain:
              schema:
                type: string
                example: pong
        !!merge <<: *x-error-response
  /openapi.yaml:
    get:
      summary: Returns this very OpenAPI spec.
      operationId: OpenapiYamlGet
      responses:
        200:
          description: OpenAPI YAML file.
          content:
            application/x-yaml:
              schema:
                type: string
                format: binary
  /admin/ping:
    get:
      summary: Ping pongs
      !!merge <<: *x-require-authenticated
      operationId: AdminPing
      responses:
        200:
          description: OK
          content:
            text/plain:
              schema:
                type: string
                example: pong
        !!merge <<: *x-error-response
      tags:
        - admin
      x-required-role: admin
  /project/{projectName}/team/:
    post:
      summary: create team.
      !!merge <<: *x-require-authenticated
      operationId: CreateTeam
      parameters:
        - $ref: '#/components/parameters/ProjectName'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateTeamRequest'
        required: true
      responses:
        201:
          description: Success.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Team'
        !!merge <<: *x-error-response
      tags:
        - team
  /team/{teamID}:
    get:
      summary: get team.
      !!merge <<: *x-require-authenticated
      operationId: GetTeam
      parameters:
        - *x-teamIDParameter
      responses:
        200:
          description: Success.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Team'
        !!merge <<: *x-error-response
      tags:
        - team
    patch:
      summary: update team.
      !!merge <<: *x-require-authenticated
      operationId: UpdateTeam
      parameters:
        - *x-teamIDParameter
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateTeamRequest'
        required: true
      responses:
        200:
          description: Success.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Team'
        !!merge <<: *x-error-response
      tags:
        - team
    delete:
      summary: delete team.
      !!merge <<: *x-require-authenticated
      operationId: DeleteTeam
      parameters:
        - *x-teamIDParameter
      responses:
        204:
          description: Success.
        !!merge <<: *x-error-response
      tags:
        - team
  /project/{projectName}/work-item-tag/:
    post:
      summary: create workitemtag.
      !!merge <<: *x-require-authenticated
      operationId: CreateWorkItemTag
      parameters:
        - $ref: '#/components/parameters/ProjectName'
      x-required-scopes:
        - work-item-tag:create
      x-required-role: manager
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateWorkItemTagRequest'
        required: true
      responses:
        201:
          description: Success.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WorkItemTag'
        !!merge <<: *x-error-response
      tags:
        - workItemTag
  /project/{projectName}/activity/:
    post:
      summary: create activity.
      !!merge <<: *x-require-authenticated
      operationId: CreateActivity
      parameters:
        - $ref: '#/components/parameters/ProjectName'
      x-required-scopes:
        - activity:create
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateActivityRequest'
        required: true
      responses:
        201:
          description: Success.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Activity'
        !!merge <<: *x-error-response
      tags:
        - activity
  /activity/{activityID}:
    get:
      summary: get activity.
      !!merge <<: *x-require-authenticated
      operationId: GetActivity
      parameters:
        - *x-activityIDParameter
      responses:
        200:
          description: Success.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Activity'
        !!merge <<: *x-error-response
      tags:
        - activity
    patch:
      summary: update activity.
      !!merge <<: *x-require-authenticated
      operationId: UpdateActivity
      x-required-scopes:
        - activity:edit
      parameters:
        - *x-activityIDParameter
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateActivityRequest'
        required: true
      responses:
        200:
          description: Success.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Activity'
        !!merge <<: *x-error-response
      tags:
        - activity
    delete:
      summary: delete activity.
      !!merge <<: *x-require-authenticated
      operationId: DeleteActivity
      x-required-scopes:
        - activity:delete
      parameters:
        - *x-activityIDParameter
      responses:
        204:
          description: Success.
        !!merge <<: *x-error-response
      tags:
        - activity
  /work-item-tag/{workItemTagID}:
    get:
      summary: get workitemtag.
      !!merge <<: *x-require-authenticated
      operationId: GetWorkItemTag
      parameters:
        - *x-workItemTagIDParameter
      responses:
        200:
          description: Success.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WorkItemTag'
        !!merge <<: *x-error-response
      tags:
        - workItemTag
    patch:
      summary: update workitemtag.
      !!merge <<: *x-require-authenticated
      operationId: UpdateWorkItemTag
      parameters:
        - *x-workItemTagIDParameter
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateWorkItemTagRequest'
        required: true
      responses:
        200:
          description: Success.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WorkItemTag'
        !!merge <<: *x-error-response
      tags:
        - workItemTag
    delete:
      summary: delete workitemtag.
      !!merge <<: *x-require-authenticated
      operationId: DeleteWorkItemTag
      parameters:
        - *x-workItemTagIDParameter
      responses:
        204:
          description: Success.
        !!merge <<: *x-error-response
      tags:
        - workItemTag
  /project/{projectName}/work-item-type/:
    post:
      summary: create workitemtype.
      !!merge <<: *x-require-authenticated
      operationId: CreateWorkItemType
      parameters:
        - $ref: '#/components/parameters/ProjectName'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateWorkItemTypeRequest'
        required: true
      responses:
        201:
          description: Success.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WorkItemType'
        !!merge <<: *x-error-response
      tags:
        - workItemType
  /work-item-type/{workItemTypeID}:
    get:
      summary: get workitemtype.
      !!merge <<: *x-require-authenticated
      operationId: GetWorkItemType
      parameters:
        - *x-workItemTypeIDParameter
      responses:
        200:
          description: Success.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WorkItemType'
        !!merge <<: *x-error-response
      tags:
        - workItemType
    patch:
      summary: update workitemtype.
      !!merge <<: *x-require-authenticated
      operationId: UpdateWorkItemType
      parameters:
        - *x-workItemTypeIDParameter
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateWorkItemTypeRequest'
        required: true
      responses:
        200:
          description: Success.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WorkItemType'
        !!merge <<: *x-error-response
      tags:
        - workItemType
    delete:
      summary: delete workitemtype.
      !!merge <<: *x-require-authenticated
      operationId: DeleteWorkItemType
      parameters:
        - *x-workItemTypeIDParameter
      responses:
        204:
          description: Success.
        !!merge <<: *x-error-response
      tags:
        - workItemType
  /user/page:
    get:
      description: ""
      summary: Get paginated users
      operationId: GetPaginatedUsers
      parameters:
        - *x-paginationLimitParameter
        - *x-paginationDirectionParameter
        - *x-paginationCursorParameter
        # TODO: allowed filters will be generated by xo for entity (joins - for having clauses - and regular fields)
        # and can be extended with dynamic params as well if needed (should create the parameter schema whenever possible)
        # : https://stackoverflow.com/questions/49582559/how-to-document-dynamic-query-parameter-names-in-openapi-swagger
        - in: query
          name: filter
          style: deepObject
          allowReserved: true
          schema:
            type: object
            properties:
              post:
                type: array # breaks kin-openapi: https://github.com/getkin/kin-openapi/issues/294
                # https://github.com/getkin/kin-openapi/pull/664/files fixes it but only for arrays, not objects
                items:
                  type: string
              author:
                type: array
                items:
                  type: string
        - in: query
          name: nested
          style: deepObject
          allowReserved: true
          schema:
            type: object
            properties:
              obj:
                type: object
                properties:
                  nestedObj:
                    type: string
        - in: query
          name: arrayFilter
          explode: false
          schema:
            type: array
            items:
              anyOf:
                - type: string # will properly escape if string contains ","
                - type: boolean
      tags:
        - user
      responses:
        200:
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedUsersResponse'
        !!merge <<: *x-error-response
      !!merge <<: *x-require-authenticated
  /user/me:
    get:
      summary: returns the logged in user
      !!merge <<: *x-require-authenticated
      operationId: GetCurrentUser
      responses:
        200:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
          description: ok
      tags:
        - user
  /user/{id}/authorization:
    patch:
      summary: updates user role and scopes by id
      !!merge <<: *x-require-authenticated
      operationId: UpdateUserAuthorization
      parameters:
        - *x-uuidParameter
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateUserAuthRequest'
        description: Updated user object
        required: true
      responses:
        204:
          description: User auth updated successfully.
      x-required-scopes:
        - scopes:write
      x-required-role: admin
      tags:
        - user
  /user/{id}:
    delete:
      summary: deletes the user by id
      !!merge <<: *x-require-authenticated
      operationId: DeleteUser
      parameters:
        - *x-uuidParameter
      responses:
        204:
          description: User deleted successfully
        !!merge <<: *x-error-response
      tags:
        - user
      x-required-scopes:
        - users:delete
      x-required-role: admin
    patch:
      summary: updates the user by id
      !!merge <<: *x-require-authenticated
      operationId: UpdateUser
      parameters:
        - *x-uuidParameter
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateUserRequest'
        description: Updated user object
        required: true
      responses:
        200:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
          description: ok
      tags:
        - user
      x-required-role: user
  # TODO: useless, if no teams will just show "No teams" and "Add team" button
  # same thing for tags
  /project/{projectName}/initialize:
    post:
      summary: creates initial data (teams, tags...) for a new project
      !!merge <<: *x-require-authenticated
      operationId: InitializeProject
      parameters:
        - $ref: '#/components/parameters/ProjectName'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateProjectBoardRequest'
        required: true
      responses:
        204:
          description: Success.
      tags:
        - project
      x-required-role: admin
  /project/{projectName}/:
    get:
      summary: returns board data for a project
      !!merge <<: *x-require-authenticated
      operationId: GetProject
      parameters:
        - $ref: '#/components/parameters/ProjectName'
      responses:
        200:
          description: Project.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DbProject'
      tags:
        - project
  /project/{projectName}/config:
    get:
      summary: returns the project configuration
      !!merge <<: *x-require-authenticated
      operationId: GetProjectConfig
      parameters:
        - $ref: '#/components/parameters/ProjectName'
      responses:
        200:
          description: Project config.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProjectConfig'
      x-required-role: admin
      tags:
        - project
    put:
      summary: updates the project configuration
      !!merge <<: *x-require-authenticated
      operationId: UpdateProjectConfig
      parameters:
        - $ref: '#/components/parameters/ProjectName'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ProjectConfig'
      responses:
        204:
          description: Config updated successfully.
      x-required-role: admin
      tags:
        - project
  /project/{projectName}/board:
    get:
      summary: returns board data for a project
      !!merge <<: *x-require-authenticated
      operationId: GetProjectBoard
      parameters:
        - $ref: '#/components/parameters/ProjectName'
      responses:
        200:
          description: Success.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProjectBoard'
      tags:
        - project
  # https://stackoverflow.com/a/32820784/11995537
  # This appears to be the simplest solution
  # POST /project/ # not in our case since theyre hardcoded to allow for complex logic per project
  # POST /project/{projectName}/team
  # GET /project/{projectName}/team
  # GET/PATCH /team/{teamId}
  # POST /team/{teamId}/workitem since [/project/{projectName}]/team/{teamId}/workitem has duplicated info in [].
  # we just care that parent is a team
  # NOTE: if we don't want to use ids for convenience, we just need to make it unique, e.g. github
  # GET /repos/{owner}/{repo}/commits
  # in our case this is similar to work item tags by name, which are shared by a whole project,
  # so a project is the direct parent of the tag
  # GET /project/{projectName}/work-item-tags/{workItemTagName}
  # however with an id we would do
  # GET /work-item-tags/{workItemTagId}
  /project/{projectName}/workitems:
    get:
      summary: returns workitems for a project
      !!merge <<: *x-require-authenticated
      operationId: GetProjectWorkitems
      parameters:
        - $ref: '#/components/parameters/ProjectName'
        - in: query
          schema:
            type: boolean
          name: open
        - in: query
          schema:
            type: boolean
          name: deleted
      responses:
        200:
          description: Success.
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: '#/components/schemas/DemoWorkItems'
                  - $ref: '#/components/schemas/DemoTwoWorkItems'
      tags:
        - project
  /work-item/:
    post:
      summary: create workitem
      !!merge <<: *x-require-authenticated
      operationId: CreateWorkitem
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateWorkItemRequest'
        required: true
      responses:
        201:
          description: Success.
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: '#/components/schemas/DbWorkItem'
      tags:
        - workItem
  /work-item/{workItemID}/:
    get:
      summary: get workitem
      !!merge <<: *x-require-authenticated
      operationId: GetWorkItem
      parameters:
        - *x-workItemIDParameter
      responses:
        200:
          description: Success.
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: '#/components/schemas/DbWorkItem'
      tags:
        - workItem
    patch:
      summary: update workitem
      !!merge <<: *x-require-authenticated
      operationId: UpdateWorkitem
      parameters:
        - *x-workItemIDParameter
      responses:
        200:
          description: Success.
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: '#/components/schemas/DbWorkItem'
      tags:
        - workItem
    delete:
      summary: delete workitem
      !!merge <<: *x-require-authenticated
      operationId: DeleteWorkitem
      parameters:
        - *x-workItemIDParameter
      responses:
        204:
          description: Success.
      tags:
        - workItem
  /work-item/{workItemID}/comment/:
    post:
      summary: create work item comment.
      !!merge <<: *x-require-authenticated
      operationId: CreateWorkItemComment
      parameters:
        - !!merge <<: *x-serialIDParameterBase
          name: workItemID
      x-required-scopes:
        - work-item-comment:create
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateWorkItemCommentRequest'
        required: true
      responses:
        201:
          description: Success.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WorkItemComment'
        !!merge <<: *x-error-response
      tags:
        - workItemComment
  /work-item/{workItemID}/comment/{workItemCommentID}:
    get:
      summary: get work item comment.
      !!merge <<: *x-require-authenticated
      operationId: GetWorkItemComment
      parameters:
        - *x-workItemIDParameter
        - *x-workItemCommentIDParameter
      responses:
        200:
          description: Success.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WorkItemComment'
        !!merge <<: *x-error-response
      tags:
        - workItemComment
    patch:
      summary: update work item comment.
      !!merge <<: *x-require-authenticated
      operationId: UpdateWorkItemComment
      x-required-scopes:
        - work-item-comment:edit
      parameters:
        - *x-workItemIDParameter
        - *x-workItemCommentIDParameter
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateWorkItemCommentRequest'
        required: true
      responses:
        200:
          description: Success.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WorkItemComment'
        !!merge <<: *x-error-response
      tags:
        - workItemComment
    delete:
      summary: delete .
      !!merge <<: *x-require-authenticated
      operationId: DeleteWorkItemComment
      x-required-scopes:
        - work-item-comment:delete
      parameters:
        - *x-workItemIDParameter
        - *x-workItemCommentIDParameter
      responses:
        204:
          description: Success.
        !!merge <<: *x-error-response
      tags:
        - workItemComment
components:
  parameters:
    ProjectName:
      description: Project name
      explode: false
      in: path
      name: projectName
      required: true
      schema:
        $ref: '#/components/schemas/Project'
      example: demo
      style: simple
    UUID: *x-uuidParameter
  schemas:
    Activity: # Generated schema. DO NOT EDIT.
      properties:
        activityID:
          type: integer
        deletedAt:
          format: date-time
          nullable: true
          type: string
        description:
          type: string
        isProductive:
          type: boolean
        name:
          type: string
        projectID:
          type: integer
      required:
        - activityID
        - projectID
        - name
        - description
        - isProductive
      type: object
      x-gen-struct: Activity
      x-is-generated: true
    CreateActivityRequest: # Generated schema. DO NOT EDIT.
      properties:
        description:
          type: string
        isProductive:
          type: boolean
        name:
          type: string
      required:
        - description
        - isProductive
        - name
      type: object
      x-gen-struct: CreateActivityRequest
      x-is-generated: true
    CreateDemoTwoWorkItemRequest: # Generated schema. DO NOT EDIT.
      properties:
        base:
          $ref: '#/components/schemas/DbWorkItemCreateParams'
        demoTwoProject:
          $ref: '#/components/schemas/DbDemoTwoWorkItemCreateParams'
        members:
          items:
            $ref: '#/components/schemas/ServicesMember'
          type: array
        projectName:
          $ref: '#/components/schemas/Project'
        tagIDs:
          items:
            type: integer
          type: array
      required:
        - projectName
        - demoTwoProject
        - base
        - tagIDs
        - members
      type: object
      x-gen-struct: CreateDemoTwoWorkItemRequest
      x-is-generated: true
    CreateDemoWorkItemRequest: # Generated schema. DO NOT EDIT.
      properties:
        base:
          $ref: '#/components/schemas/DbWorkItemCreateParams'
        demoProject:
          $ref: '#/components/schemas/DbDemoWorkItemCreateParams'
        members:
          items:
            $ref: '#/components/schemas/ServicesMember'
          type: array
        projectName:
          $ref: '#/components/schemas/Project'
        tagIDs:
          items:
            type: integer
          type: array
      required:
        - projectName
        - demoProject
        - base
        - tagIDs
        - members
      type: object
      x-gen-struct: CreateDemoWorkItemRequest
      x-is-generated: true
    CreateProjectBoardRequest: # Generated schema. DO NOT EDIT.
      properties:
        tags:
          items:
            $ref: '#/components/schemas/DbWorkItemTagCreateParams'
          nullable: true
          type: array
        teams:
          items:
            $ref: '#/components/schemas/DbTeamCreateParams'
          nullable: true
          type: array
      type: object
      x-gen-struct: CreateProjectBoardRequest
      x-is-generated: true
    CreateTeamRequest: # Generated schema. DO NOT EDIT.
      properties:
        description:
          type: string
        name:
          type: string
      required:
        - description
        - name
      type: object
      x-gen-struct: CreateTeamRequest
      x-is-generated: true
    CreateWorkItemCommentRequest: # Generated schema. DO NOT EDIT.
      properties:
        message:
          type: string
        userID:
          $ref: '#/components/schemas/DbUserID'
        workItemID:
          type: integer
      required:
        - message
        - userID
        - workItemID
      type: object
      x-gen-struct: CreateWorkItemCommentRequest
      x-is-generated: true
    CreateWorkItemTagRequest: # Generated schema. DO NOT EDIT.
      properties:
        color:
          pattern: ^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$
          type: string
        description:
          type: string
        name:
          type: string
      required:
        - color
        - description
        - name
      type: object
      x-gen-struct: CreateWorkItemTagRequest
      x-is-generated: true
    CreateWorkItemTypeRequest: # Generated schema. DO NOT EDIT.
      properties:
        color:
          pattern: ^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$
          type: string
        description:
          type: string
        name:
          type: string
      required:
        - color
        - description
        - name
      type: object
      x-gen-struct: CreateWorkItemTypeRequest
      x-is-generated: true
    DbDemoTwoWorkItem: # Generated schema. DO NOT EDIT.
      properties:
        customDateForProject2:
          format: date-time
          nullable: true
          type: string
        workItemID:
          type: integer
      required:
        - workItemID
      type: object
    DbDemoTwoWorkItemCreateParams: # Generated schema. DO NOT EDIT.
      properties:
        customDateForProject2:
          format: date-time
          nullable: true
          type: string
      type: object
    DbDemoWorkItem: # Generated schema. DO NOT EDIT.
      properties:
        lastMessageAt:
          format: date-time
          type: string
        line:
          type: string
        ref:
          pattern: ^[0-9]{8}$
          type: string
        reopened:
          type: boolean
        workItemID:
          type: integer
      required:
        - workItemID
        - ref
        - line
        - lastMessageAt
        - reopened
      type: object
      x-gen-struct: DbDemoWorkItem
      x-is-generated: true
    DbDemoWorkItemCreateParams: # Generated schema. DO NOT EDIT.
      properties:
        lastMessageAt:
          format: date-time
          type: string
        line:
          type: string
        ref:
          pattern: ^[0-9]{8}$
          type: string
        reopened:
          type: boolean
      required:
        - lastMessageAt
        - line
        - ref
        - reopened
      type: object
    DbKanbanStep: # Generated schema. DO NOT EDIT.
      properties:
        color:
          pattern: ^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$
          type: string
        description:
          type: string
        kanbanStepID:
          type: integer
        name:
          type: string
        projectID:
          type: integer
        stepOrder:
          type: integer
        timeTrackable:
          type: boolean
      required:
        - kanbanStepID
        - projectID
        - stepOrder
        - name
        - description
        - color
        - timeTrackable
      type: object
      x-gen-struct: DbKanbanStep
      x-is-generated: true
    DbNotification: # Generated schema. DO NOT EDIT.
      properties:
        body:
          type: string
        createdAt:
          format: date-time
          type: string
        labels:
          items:
            type: string
          type: array
        link:
          nullable: true
          type: string
        notificationID:
          type: integer
        notificationType:
          $ref: '#/components/schemas/NotificationType'
        receiver:
          $ref: '#/components/schemas/DbUserID'
        sender:
          $ref: '#/components/schemas/DbUserID'
        title:
          type: string
      required:
        - notificationID
        - title
        - body
        - labels
        - createdAt
        - sender
        - notificationType
      type: object
    DbProject: # Generated schema. DO NOT EDIT.
      properties:
        boardConfig:
          $ref: '#/components/schemas/ProjectConfig'
        createdAt:
          format: date-time
          type: string
        description:
          type: string
        name:
          $ref: '#/components/schemas/Project'
        projectID:
          type: integer
        updatedAt:
          format: date-time
          type: string
      required:
        - projectID
        - name
        - description
        - boardConfig
        - createdAt
        - updatedAt
      type: object
      x-gen-struct: DbProject
      x-is-generated: true
    DbTeam: # Generated schema. DO NOT EDIT.
      properties:
        createdAt:
          format: date-time
          type: string
        description:
          type: string
        name:
          type: string
        projectID:
          type: integer
        teamID:
          type: integer
        updatedAt:
          format: date-time
          type: string
      required:
        - teamID
        - projectID
        - name
        - description
        - createdAt
        - updatedAt
      type: object
    DbTeamCreateParams: # Generated schema. DO NOT EDIT.
      properties:
        description:
          type: string
        name:
          type: string
      required:
        - description
        - name
      type: object
    DbTimeEntry: # Generated schema. DO NOT EDIT.
      properties:
        activityID:
          type: integer
        comment:
          type: string
        durationMinutes:
          nullable: true
          type: integer
        start:
          format: date-time
          type: string
        teamID:
          nullable: true
          type: integer
        timeEntryID:
          type: integer
        userID:
          $ref: '#/components/schemas/DbUserID'
        workItemID:
          nullable: true
          type: integer
      required:
        - timeEntryID
        - activityID
        - userID
        - comment
        - start
      type: object
      x-gen-struct: DbTimeEntry
      x-is-generated: true
    DbUser: # Generated schema. DO NOT EDIT.
      properties:
        createdAt:
          format: date-time
          type: string
        deletedAt:
          format: date-time
          nullable: true
          type: string
        email:
          type: string
        firstName:
          nullable: true
          type: string
        fullName:
          nullable: true
          type: string
        hasGlobalNotifications:
          type: boolean
        hasPersonalNotifications:
          type: boolean
        lastName:
          nullable: true
          type: string
        scopes:
          $ref: '#/components/schemas/Scopes'
        userID:
          $ref: '#/components/schemas/DbUserID'
        username:
          type: string
      required:
        - userID
        - username
        - email
        - scopes
        - hasPersonalNotifications
        - hasGlobalNotifications
        - createdAt
      type: object
      x-gen-struct: DbUser
      x-is-generated: true
    DbUserAPIKey: # Generated schema. DO NOT EDIT.
      properties:
        apiKey:
          type: string
        expiresOn:
          format: date-time
          type: string
        userID:
          $ref: '#/components/schemas/DbUserID'
      required:
        - apiKey
        - expiresOn
        - userID
      type: object
      x-gen-struct: DbUserAPIKey
      x-is-generated: true
    DbUserID: # Generated schema. DO NOT EDIT.
      example: cdb15f83-1c5d-4727-98d1-8924ccd1fc01
      pattern: ^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}
      type: string
      x-go-type: uuid.UUID
      x-go-type-import:
        name: uuid
        path: github.com/google/uuid
      x-is-generated: true
    DbUserWIAUWorkItem: # Generated schema. DO NOT EDIT.
      properties:
        role:
          $ref: '#/components/schemas/WorkItemRole'
        user:
          $ref: '#/components/schemas/DbUser'
      required:
        - user
        - role
      type: object
    DbWorkItem: # Generated schema. DO NOT EDIT.
      properties:
        closedAt:
          format: date-time
          nullable: true
          type: string
        createdAt:
          format: date-time
          type: string
        deletedAt:
          format: date-time
          nullable: true
          type: string
        description:
          type: string
        kanbanStepID:
          type: integer
        metadata:
          additionalProperties: {}
          type: object
        targetDate:
          format: date-time
          type: string
        teamID:
          type: integer
        title:
          type: string
        updatedAt:
          format: date-time
          type: string
        workItemID:
          type: integer
        workItemTypeID:
          type: integer
      required:
        - workItemID
        - title
        - description
        - workItemTypeID
        - metadata
        - teamID
        - kanbanStepID
        - targetDate
        - createdAt
        - updatedAt
      type: object
      x-gen-struct: DbWorkItem
      x-is-generated: true
    DbWorkItemComment: # Generated schema. DO NOT EDIT.
      properties:
        createdAt:
          format: date-time
          type: string
        message:
          type: string
        updatedAt:
          format: date-time
          type: string
        userID:
          $ref: '#/components/schemas/DbUserID'
        workItemCommentID:
          type: integer
        workItemID:
          type: integer
      required:
        - workItemCommentID
        - workItemID
        - userID
        - message
        - createdAt
        - updatedAt
      type: object
      x-gen-struct: DbWorkItemComment
      x-is-generated: true
    DbWorkItemCreateParams: # Generated schema. DO NOT EDIT.
      properties:
        closedAt:
          format: date-time
          nullable: true
          type: string
        description:
          type: string
        kanbanStepID:
          type: integer
        metadata:
          additionalProperties: {}
          type: object
        targetDate:
          format: date-time
          type: string
        teamID:
          type: integer
        title:
          type: string
        workItemTypeID:
          type: integer
      required:
        - description
        - kanbanStepID
        - metadata
        - targetDate
        - teamID
        - title
        - workItemTypeID
      type: object
    DbWorkItemTag: # Generated schema. DO NOT EDIT.
      properties:
        color:
          pattern: ^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$
          type: string
        deletedAt:
          format: date-time
          nullable: true
          type: string
        description:
          type: string
        name:
          type: string
        projectID:
          type: integer
        workItemTagID:
          type: integer
      required:
        - workItemTagID
        - projectID
        - name
        - description
        - color
      type: object
      x-gen-struct: DbWorkItemTag
      x-is-generated: true
    DbWorkItemTagCreateParams: # Generated schema. DO NOT EDIT.
      properties:
        color:
          pattern: ^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$
          type: string
        description:
          type: string
        name:
          type: string
      required:
        - color
        - description
        - name
      type: object
    DbWorkItemType: # Generated schema. DO NOT EDIT.
      properties:
        color:
          pattern: ^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$
          type: string
        description:
          type: string
        name:
          type: string
        projectID:
          type: integer
        workItemTypeID:
          type: integer
      required:
        - workItemTypeID
        - projectID
        - name
        - description
        - color
      type: object
      x-gen-struct: DbWorkItemType
      x-is-generated: true
    DemoTwoWorkItems: # Generated schema. DO NOT EDIT.
      properties:
        closedAt:
          format: date-time
          nullable: true
          type: string
        createdAt:
          format: date-time
          type: string
        deletedAt:
          format: date-time
          nullable: true
          type: string
        demoTwoWorkItem:
          $ref: '#/components/schemas/DbDemoTwoWorkItem'
        description:
          type: string
        kanbanStepID:
          type: integer
        members:
          items:
            $ref: '#/components/schemas/DbUserWIAUWorkItem'
          nullable: true
          type: array
        metadata:
          additionalProperties: {}
          type: object
        targetDate:
          format: date-time
          type: string
        teamID:
          nullable: true
          type: integer
        timeEntries:
          items:
            $ref: '#/components/schemas/DbTimeEntry'
          nullable: true
          type: array
        title:
          type: string
        updatedAt:
          format: date-time
          type: string
        workItemComments:
          items:
            $ref: '#/components/schemas/DbWorkItemComment'
          nullable: true
          type: array
        workItemID:
          type: integer
        workItemTags:
          items:
            $ref: '#/components/schemas/DbWorkItemTag'
          nullable: true
          type: array
        workItemType:
          $ref: '#/components/schemas/DbWorkItemType'
        workItemTypeID:
          type: integer
      required:
        - workItemID
        - title
        - description
        - workItemTypeID
        - metadata
        - teamID
        - kanbanStepID
        - targetDate
        - createdAt
        - updatedAt
        - demoTwoWorkItem
      type: object
      x-gen-struct: DemoTwoWorkItems
      x-is-generated: true
    DemoWorkItems: # Generated schema. DO NOT EDIT.
      properties:
        closedAt:
          format: date-time
          nullable: true
          type: string
        createdAt:
          format: date-time
          type: string
        deletedAt:
          format: date-time
          nullable: true
          type: string
        demoWorkItem:
          $ref: '#/components/schemas/DbDemoWorkItem'
        description:
          type: string
        kanbanStepID:
          type: integer
        members:
          items:
            $ref: '#/components/schemas/DbUserWIAUWorkItem'
          nullable: true
          type: array
        metadata:
          additionalProperties: {}
          type: object
        targetDate:
          format: date-time
          type: string
        teamID:
          nullable: true
          type: integer
        timeEntries:
          items:
            $ref: '#/components/schemas/DbTimeEntry'
          nullable: true
          type: array
        title:
          type: string
        updatedAt:
          format: date-time
          type: string
        workItemComments:
          items:
            $ref: '#/components/schemas/DbWorkItemComment'
          nullable: true
          type: array
        workItemID:
          type: integer
        workItemTags:
          items:
            $ref: '#/components/schemas/DbWorkItemTag'
          nullable: true
          type: array
        workItemType:
          $ref: '#/components/schemas/DbWorkItemType'
        workItemTypeID:
          type: integer
      required:
        - workItemID
        - title
        - description
        - workItemTypeID
        - metadata
        - teamID
        - kanbanStepID
        - targetDate
        - createdAt
        - updatedAt
        - demoWorkItem
      type: object
      x-gen-struct: DemoWorkItems
      x-is-generated: true
    Notification: # Generated schema. DO NOT EDIT.
      properties:
        notification:
          $ref: '#/components/schemas/DbNotification'
        notificationID:
          type: integer
        read:
          type: boolean
        userID:
          $ref: '#/components/schemas/DbUserID'
        userNotificationID:
          type: integer
      required:
        - userNotificationID
        - notificationID
        - read
        - userID
        - notification
      type: object
      x-gen-struct: Notification
      x-is-generated: true
    PaginatedNotificationsResponse: # Generated schema. DO NOT EDIT.
      properties:
        items:
          items:
            $ref: '#/components/schemas/Notification'
          nullable: true
          type: array
        page:
          $ref: '#/components/schemas/PaginationPage'
      required:
        - page
        - items
      type: object
      x-gen-struct: PaginatedNotificationsResponse
      x-is-generated: true
    PaginatedUsersResponse: # Generated schema. DO NOT EDIT.
      properties:
        items:
          items:
            $ref: '#/components/schemas/User'
          nullable: true
          type: array
        page:
          $ref: '#/components/schemas/PaginationPage'
      required:
        - page
        - items
      type: object
      x-gen-struct: PaginatedUsersResponse
      x-is-generated: true
    PaginationPage: # Generated schema. DO NOT EDIT.
      properties:
        nextCursor:
          type: string
      type: object
      x-gen-struct: PaginationPage
      x-is-generated: true
    ProjectBoard: # Generated schema. DO NOT EDIT.
      properties:
        projectName:
          $ref: '#/components/schemas/Project'
      required:
        - projectName
      type: object
      x-gen-struct: ProjectBoard
      x-is-generated: true
    ServicesMember: # Generated schema. DO NOT EDIT.
      properties:
        role:
          $ref: '#/components/schemas/WorkItemRole'
        userID:
          $ref: '#/components/schemas/DbUserID'
      required:
        - role
        - userID
      type: object
    SharedWorkItemJoins: # Generated schema. DO NOT EDIT.
      properties:
        members:
          items:
            $ref: '#/components/schemas/DbUserWIAUWorkItem'
          nullable: true
          type: array
        timeEntries:
          items:
            $ref: '#/components/schemas/DbTimeEntry'
          nullable: true
          type: array
        workItemComments:
          items:
            $ref: '#/components/schemas/DbWorkItemComment'
          nullable: true
          type: array
        workItemTags:
          items:
            $ref: '#/components/schemas/DbWorkItemTag'
          nullable: true
          type: array
        workItemType:
          $ref: '#/components/schemas/DbWorkItemType'
      type: object
      x-gen-struct: SharedWorkItemJoins
      x-is-generated: true
    Team: # Generated schema. DO NOT EDIT.
      properties:
        createdAt:
          format: date-time
          type: string
        description:
          type: string
        name:
          type: string
        projectID:
          type: integer
        teamID:
          type: integer
        updatedAt:
          format: date-time
          type: string
      required:
        - teamID
        - projectID
        - name
        - description
        - createdAt
        - updatedAt
      type: object
      x-gen-struct: Team
      x-is-generated: true
    UpdateActivityRequest: # Generated schema. DO NOT EDIT.
      properties:
        description:
          type: string
        isProductive:
          type: boolean
        name:
          type: string
      type: object
      x-gen-struct: UpdateActivityRequest
      x-is-generated: true
    UpdateTeamRequest: # Generated schema. DO NOT EDIT.
      properties:
        description:
          type: string
        name:
          type: string
      type: object
      x-gen-struct: UpdateTeamRequest
      x-is-generated: true
    UpdateWorkItemCommentRequest: # Generated schema. DO NOT EDIT.
      properties:
        message:
          type: string
        userID:
          $ref: '#/components/schemas/DbUserID'
        workItemID:
          type: integer
      type: object
      x-gen-struct: UpdateWorkItemCommentRequest
      x-is-generated: true
    UpdateWorkItemTagRequest: # Generated schema. DO NOT EDIT.
      properties:
        color:
          pattern: ^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$
          type: string
        description:
          type: string
        name:
          type: string
      type: object
      x-gen-struct: UpdateWorkItemTagRequest
      x-is-generated: true
    UpdateWorkItemTypeRequest: # Generated schema. DO NOT EDIT.
      properties:
        color:
          pattern: ^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$
          type: string
        description:
          type: string
        name:
          type: string
      type: object
      x-gen-struct: UpdateWorkItemTypeRequest
      x-is-generated: true
    User: # Generated schema. DO NOT EDIT.
      properties:
        apiKey:
          $ref: '#/components/schemas/DbUserAPIKey'
        createdAt:
          format: date-time
          type: string
        deletedAt:
          format: date-time
          nullable: true
          type: string
        email:
          type: string
        firstName:
          nullable: true
          type: string
        fullName:
          nullable: true
          type: string
        hasGlobalNotifications:
          type: boolean
        hasPersonalNotifications:
          type: boolean
        lastName:
          nullable: true
          type: string
        projects:
          items:
            $ref: '#/components/schemas/DbProject'
          nullable: true
          type: array
        role:
          $ref: '#/components/schemas/Role'
        scopes:
          $ref: '#/components/schemas/Scopes'
        teams:
          items:
            $ref: '#/components/schemas/DbTeam'
          nullable: true
          type: array
        userID:
          $ref: '#/components/schemas/DbUserID'
        username:
          type: string
      required:
        - userID
        - username
        - email
        - scopes
        - hasPersonalNotifications
        - hasGlobalNotifications
        - createdAt
        - role
      type: object
      x-gen-struct: User
      x-is-generated: true
    WorkItemComment: # Generated schema. DO NOT EDIT.
      properties:
        createdAt:
          format: date-time
          type: string
        message:
          type: string
        updatedAt:
          format: date-time
          type: string
        userID:
          $ref: '#/components/schemas/DbUserID'
        workItemCommentID:
          type: integer
        workItemID:
          type: integer
      required:
        - workItemCommentID
        - workItemID
        - userID
        - message
        - createdAt
        - updatedAt
      type: object
      x-gen-struct: WorkItemComment
      x-is-generated: true
    WorkItemTag: # Generated schema. DO NOT EDIT.
      properties:
        color:
          pattern: ^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$
          type: string
        deletedAt:
          format: date-time
          nullable: true
          type: string
        description:
          type: string
        name:
          type: string
        projectID:
          type: integer
        workItemTagID:
          type: integer
      required:
        - workItemTagID
        - projectID
        - name
        - description
        - color
      type: object
      x-gen-struct: WorkItemTag
      x-is-generated: true
    WorkItemType: # Generated schema. DO NOT EDIT.
      properties:
        color:
          pattern: ^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$
          type: string
        description:
          type: string
        name:
          type: string
        projectID:
          type: integer
        workItemTypeID:
          type: integer
      required:
        - workItemTypeID
        - projectID
        - name
        - description
        - color
      type: object
      x-gen-struct: WorkItemType
      x-is-generated: true
    Direction:
      type: string
      enum:
        - asc
        - desc
    DbActivity:
      properties:
        activityID:
          type: integer
        description:
          type: string
        isProductive:
          type: boolean
        name:
          type: string
        projectID:
          type: integer
      required:
        - activityID
        - projectID
        - name
        - description
        - isProductive
      type: object
    ProjectConfig:
      properties:
        fields:
          items:
            $ref: '#/components/schemas/ProjectConfigField'
          nullable: false
          type: array
        header:
          items:
            type: string
          nullable: false
          type: array
        visualization:
          type: object
      required:
        - header
        - fields
      type: object
    ProjectConfigField:
      properties:
        isEditable:
          type: boolean
        isVisible:
          type: boolean
        name:
          type: string
        path:
          type: string
        showCollapsed:
          type: boolean
      required:
        - isEditable
        - showCollapsed
        - isVisible
        - path
        - name
      type: object
    HTTPValidationError:
      title: HTTPValidationError
      type: object
      required:
        - messages
      properties:
        detail:
          title: Detail
          description: Additional details for validation errors
          type: array
          items:
            $ref: '#/components/schemas/ValidationError'
        messages:
          title: Messages
          description: Descriptive error messages to show in a callout
          type: array
          items:
            type: string
    ErrorCode:
      description: |
        Represents standardized HTTP error types.
        Notes:
        - 'Private' marks an error to be hidden in response.
      type: string
      enum:
        - Unknown
        - Private
        - NotFound
        - InvalidArgument
        - AlreadyExists
        - Unauthorized
        - Unauthenticated
        - RequestValidation
        - ResponseValidation
        - OIDC
        - InvalidRole
        - InvalidScope
        - InvalidUUID
    HTTPError:
      description: represents an error message response.
      type: object
      properties:
        title:
          type: string
        detail:
          type: string
        status:
          type: integer
        error:
          type: string
        loc:
          title: Location
          description: location in body path, if any
          type: array
          items:
            type: string
        type:
          $ref: '#/components/schemas/ErrorCode'
        validationError:
          $ref: '#/components/schemas/HTTPValidationError'
      required:
        - title
        - detail
        - status
        - error
        - type
    Topics:
      description: string identifiers for SSE event listeners.
      type: string
      enum:
        # will not alert directly, just show badge when a new notification is sent.
        # - UserNotifications
        # - ManagerNotifications
        # - AdminNotifications
        # will use personalSubs channel per userID since it depends on
        # members per specific workitem
        # - WorkItemMoved
        # - WorkItemClosed
        - GlobalAlerts
    Scope: # Generated from scopes.json keys. DO NOT EDIT.
      type: string
      enum: ["project-member", "users:read", "users:write", "users:delete", "scopes:write", "team-settings:write", "project-settings:write", "activity:create", "activity:edit", "activity:delete", "work-item-tag:create", "work-item-tag:edit", "work-item-tag:delete", "work-item:review", "work-item-comment:create", "work-item-comment:edit", "work-item-comment:delete"]
      x-is-generated: true
      description: is generated from scopes.json keys.
    Scopes:
      type: array
      items:
        $ref: '#/components/schemas/Scope'
    Role: # Generated from roles.json keys. DO NOT EDIT.
      type: string
      enum: ["guest", "user", "advancedUser", "manager", "admin", "superAdmin"]
      x-is-generated: true
      description: is generated from roles.json keys.
    WorkItemRole: # Generated from database enum 'work_item_role'. DO NOT EDIT.
      title: WorkItem role
      type: string
      x-is-generated: true
      enum: ["preparer", "reviewer"]
      description: is generated from database enum 'work_item_role'.
    UpdateUserRequest:
      description: represents User data to update
      example:
        firstName: Jane
        lastName: Doe
      properties:
        firstName:
          description: originally from auth server but updatable
          type: string
          pattern: ^[\p{L} '-]+$
        lastName:
          description: originally from auth server but updatable
          type: string
          pattern: ^[\p{L} '-]+$
      type: object
    UpdateUserAuthRequest:
      description: represents User authorization data to update
      example:
        role: manager
        scopes:
          - users:read
      properties:
        role:
          $ref: '#/components/schemas/Role'
        scopes:
          $ref: '#/components/schemas/Scopes'
      type: object
    ValidationError:
      title: ValidationError
      required:
        - loc
        - msg
        - detail
        - type
      type: object
      properties:
        loc:
          title: Location
          description: location in body path, if any
          type: array
          items:
            type: string
        msg:
          title: Message
          description: should always be shown to the user
          type: string
        detail:
          description: verbose details of the error
          title: Error details
          type: object
          required:
            - schema
            - value
          properties:
            schema:
              type: object
            value:
              type: string
        ctx:
          title: Contextual information
          type: object
    UuidUUID:
      pattern: ^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}
      type: string
      x-go-type: uuid.UUID
      x-go-type-import:
        name: uuid
        path: github.com/google/uuid
    CreateWorkItemRequest:
      oneOf:
        - $ref: '#/components/schemas/CreateDemoWorkItemRequest'
        - $ref: '#/components/schemas/CreateDemoTwoWorkItemRequest'
      discriminator:
        propertyName: projectName
        mapping:
          demo: '#/components/schemas/CreateDemoWorkItemRequest'
          demo_two: '#/components/schemas/CreateDemoTwoWorkItemRequest'
    Project: # Generated from projects table. DO NOT EDIT.
      enum: ["demo", "demo_two"]
      type: string
      x-is-generated: true
      description: is generated from projects table.
    DbActivityCreateParams:
      properties:
        description:
          type: string
        isProductive:
          type: boolean
        name:
          type: string
        projectID:
          type: integer
      required:
        - description
        - isProductive
        - name
      type: object
    DbWorkItemRole:
      type: string
    NotificationType: # Generated from database enum 'notification_type'. DO NOT EDIT.
      description: is generated from database enum 'notification_type'.
      type: string
      x-is-generated: true
      enum: ["personal", "global"]
    DemoTwoWorkItemTypes: # Generated from work_item_types table. DO NOT EDIT.
      type: string
      enum: ["Type 1", "Type 2", "Another type"]
      x-is-generated: true
      description: is generated from work_item_types table.
    DemoWorkItemTypes: # Generated from work_item_types table. DO NOT EDIT.
      type: string
      enum: ["Type 1"]
      x-is-generated: true
      description: is generated from work_item_types table.
    DbWorkItemID: {}
    DbProjectID: {}
    DbWorkItemTypeID: {}
    DbNotificationID: {}
    DbUserNotification:
      properties:
        notificationID:
          type: integer
        read:
          type: boolean
        userID:
          $ref: '#/components/schemas/DbUserID'
        userNotificationID:
          type: integer
      required:
        - userNotificationID
        - notificationID
        - read
        - userID
      type: object
    DemoKanbanSteps: # Generated from kanban_steps table. DO NOT EDIT.
      type: string
      enum: ["Disabled", "Received", "Under review", "Work in progress"]
      x-is-generated: true
      description: is generated from kanban_steps table.
    DemoTwoKanbanSteps: # Generated from kanban_steps table. DO NOT EDIT.
      type: string
      enum: ["Received"]
      x-is-generated: true
      description: is generated from kanban_steps table.
  examples: # Generated from internal structs. DO NOT EDIT.
    User:
      value:
        username: username
        email: email@email.com
        password: password
  securitySchemes:
    api_key:
      in: header
      name: x-api-key
      type: apiKey
    bearer_auth:
      type: http
      scheme: bearer
      bearerFormat: JWT
